/* CONTAINER for Python Development
 * references:
 * » https://containers.dev/implementors/json_reference
 * » https://github.com/devcontainers/features/tree/main/src
 * » https://code.visualstudio.com/docs/remote/containers
 * » https://github.com/devcontainers/images/blob/main/src/python
 *
 * » F1 > Dev Containers: Rebuild Container
 */
{
  "name": "Stock Indicators for Python",
  "image": "mcr.microsoft.com/devcontainers/python:3.13",
  "features": {
    "ghcr.io/devcontainers/features/dotnet:2": {
      "version": "10.0",
      "additionalVersions": "9.0,8.0"
    },
    "ghcr.io/devcontainers/features/node:1": {
      "version": "lts",
      "pnpmVersion": "none",
      "nvmVersion": "none"
    },
    "ghcr.io/devcontainers/features/github-cli:1": {},
    "ghcr.io/devcontainers/features/ruby:1": {
      "version": "3.3"
    }
  },
  // Use 'settings' to set *default* container specific settings.json
  // values on container create.
  "customizations": {
    "vscode": {
      // container overrides only
      // otherwise use .vscode/settings.json
      "settings": {
        "python.defaultInterpreterPath": "${containerWorkspaceFolder}/.venv/bin/python",
        "python.testing.pytestEnabled": true,
        "python.testing.unittestEnabled": false,
        "[python]": {
          "editor.defaultFormatter": "charliermarsh.ruff",
          "editor.formatOnSave": true,
          "editor.codeActionsOnSave": {
            "source.organizeImports.ruff": "explicit",
            "source.fixAll.ruff": "explicit"
          }
        },
        // required extensions
        // for recommended, see .vscode/extensions.json
        "extensions": [
          "charliermarsh.ruff",
          "DavidAnson.vscode-markdownlint",
          "EditorConfig.EditorConfig",
          "ms-python.debugpy",
          "ms-python.python",
          "ms-python.vscode-pylance"
        ]
      }
    },
    "forwardPorts": [
      4000
    ],
    "portsAttributes": {
      "4000": {
        "label": "Doc Site (Jekyll)",
        "onAutoForward": "notify"
      }
    },
    "remoteUser": "vscode",
    "postCreateCommand": ".devcontainer/post-create.sh",
    "postStartCommand": "echo 'Container started'"
  }
